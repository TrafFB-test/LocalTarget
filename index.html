<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Сайт</title>
  <style>
    :root {
      --pulse-scale: 1.07;
      --pulse-duration: 1.8s;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow-y: auto;
    }

    /* Фон: цифровой дождь */
    #matrix {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
    }

    /* Сцена: скроллимся, если фото выше окна */
    #stage {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 0;
    }

    /* Обертка фото */
    #photo-wrapper {
      position: relative;
      width: 100vw;
      height: auto;
      overflow: visible;
    }

    /* Фото: ширина — весь экран, высота пропорциональна */
    #photo {
      display: block;
      width: 100vw;
      height: auto;
      border-radius: 4px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);

      /* Защита: выключаем выделение и перетаскивание */
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none; /* клики на изображении не проходят */
    }

    /* Прозрачный защитный слой над изображением, ниже кнопок */
    #photo-protector {
      position: absolute;
      inset: 0;
      z-index: 1;        /* кнопки выше (z-index:2) */
      background: transparent;
      pointer-events: auto;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    /* Кнопки: абсолютное позиционирование внутри фото */
    .hotspot {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      text-decoration: none;
      display: inline-block;
      width: 65.9%;
      z-index: 2; /* поверх фото и защитного слоя */
      filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.4));
      animation: pulse var(--pulse-duration) ease-in-out infinite;
    }

    .hotspot img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 10px;
    }

    .hotspot:focus-visible {
      outline: 2px solid #00ff88;
      outline-offset: 4px;
      border-radius: 12px;
    }

    @keyframes pulse {
      0% {
        transform: translateX(-50%) scale(1);
        filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.40));
      }
      50% {
        transform: translateX(-50%) scale(var(--pulse-scale));
        filter: drop-shadow(0 10px 26px rgba(0, 255, 136, 0.35));
      }
      100% {
        transform: translateX(-50%) scale(1);
        filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.40));
      }
    }
  </style>
</head>
<body>
  <canvas id="matrix"></canvas>

  <main id="stage" aria-label="Главная сцена">
    <div id="photo-wrapper">
      <img
        id="photo"
        src="./Основа.png"
        alt="Главная фотография"
        onerror="this.onerror=null; this.style.opacity='0.6'; this.alt='Основа.png не найден';"
      />

      <div id="photo-protector" aria-hidden="true"></div>

      <!-- Кнопка 1: УЗНАТЬ ПОДРОБНЕЕ -->
      <a
        id="hotspot1"
        class="hotspot"
        href="https://t.me/Local_FB"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Узнать подробнее"
        style="top: 66.2%;"
      >
        <img
          src="./УЗНАТЬ%20ПОДРОБНЕЕ.png"
          alt="УЗНАТЬ ПОДРОБНЕЕ"
          onerror="this.onerror=null; this.style.opacity='0.6'; this.alt='УЗНАТЬ ПОДРОБНЕЕ.png не найден';"
        />
      </a>

      <!-- Кнопка 2: НАПИСАТЬ В ТГ -->
      <a
        id="hotspot2"
        class="hotspot"
        href="https://t.me/Local_FB"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Написать в Telegram"
        style="top: 93.3%;"
      >
        <img
          src="./НАПИСАТЬ%20В%20ТГ.png"
          alt="НАПИСАТЬ В ТГ"
          onerror="this.onerror=null; this.style.opacity='0.6'; this.alt='НАПИСАТЬ В ТГ.png не найден';"
        />
      </a>
    </div>
  </main>

  <script>
    // Блокируем контекстное меню, выделение и перетаскивание на изображении и защитном слое
    (function protectImage() {
      const photo = document.getElementById('photo');
      const protector = document.getElementById('photo-protector');

      ['contextmenu', 'dragstart', 'selectstart'].forEach(evt => {
        photo.addEventListener(evt, e => e.preventDefault());
        protector.addEventListener(evt, e => e.preventDefault());
      });

      let touchTimer;
      protector.addEventListener('touchstart', (e) => {
        touchTimer = setTimeout(() => {
          e.preventDefault();
        }, 300);
      }, { passive: false });
      protector.addEventListener('touchend', () => {
        clearTimeout(touchTimer);
      });
    })();

    // Цифровой дождь: 0/1, тускло-зелёный, без размытия, ускорено падение
    (function () {
      const canvas = document.getElementById('matrix');
      const ctx = canvas.getContext('2d');

      let DPR = Math.max(1, Math.round(window.devicePixelRatio || 1));
      function resize() {
        DPR = Math.max(1, Math.round(window.devicePixelRatio || 1));
        canvas.width = Math.floor(window.innerWidth * DPR);
        canvas.height = Math.floor(window.innerHeight * DPR);
        canvas.style.width = '100vw';
        canvas.style.height = '100vh';
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.scale(DPR, DPR);
      }
      resize();
      window.addEventListener('resize', resize);

      const fontSize = 18;
      const fontFamily = 'Menlo, Consolas, monospace';
      const columnsCount = () => Math.floor((canvas.width / DPR) / fontSize);

      const HEAD_COLOR = '#2ea62e';
      const TRAIL_BASE_COLOR = { r: 20, g: 140, b: 20 };

      const USE_HARD_CLEAR = true;
      const MIN_SPEED = 0.95;
      const MAX_SPEED = 1.7;
      const FALL_SPEED_MULTIPLIER = 1.5; // ускоряем падение
      const MIN_TRAIL = 12;
      const MAX_TRAIL = 26;
      const CHAR_SWITCH_PROB = 0.05;

      let cols = [];

      function initColumns() {
        const count = columnsCount();
        cols = new Array(count).fill(0).map((_, i) => ({
          x: i * fontSize,
          y: Math.random() * (window.innerHeight),
          speed: MIN_SPEED + Math.random() * (MAX_SPEED - MIN_SPEED),
          trail: Math.floor(MIN_TRAIL + Math.random() * (MAX_TRAIL - MIN_TRAIL)),
          head: Math.random() < 0.5 ? '0' : '1',
        }));
      }

      initColumns();

      ctx.textBaseline = 'top';
      ctx.shadowBlur = 0;
      ctx.imageSmoothingEnabled = false;

      function draw() {
        const widthPx = canvas.width / DPR;
        const heightPx = canvas.height / DPR;

        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, widthPx, heightPx);

        ctx.font = `bold ${fontSize}px ${fontFamily}`;

        for (let i = 0; i < cols.length; i++) {
          const c = cols[i];

          if (Math.random() < CHAR_SWITCH_PROB) {
            c.head = c.head === '0' ? '1' : '0';
          }

          const yHead = Math.floor(c.y);
          ctx.fillStyle = HEAD_COLOR;
          ctx.fillText(c.head, c.x, yHead);

          for (let j = 1; j <= c.trail; j++) {
            const yy = Math.floor(c.y - j * fontSize);
            if (yy < -fontSize) break;

            const t = j / c.trail;
            const brightness = 0.75 * (1 - t) + 0.25;
            const r = Math.round(TRAIL_BASE_COLOR.r * brightness);
            const g = Math.round(TRAIL_BASE_COLOR.g * brightness);
            const b = Math.round(TRAIL_BASE_COLOR.b * brightness);

            const char = Math.random() < 0.5 ? '0' : '1';
            ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;
            ctx.fillText(char, c.x, yy);
          }

          c.y += c.speed * FALL_SPEED_MULTIPLIER;

          if (c.y - c.trail * fontSize > heightPx + fontSize) {
            c.y = -Math.random() * 200;
            c.speed = MIN_SPEED + Math.random() * (MAX_SPEED - MIN_SPEED);
            c.trail = Math.floor(MIN_TRAIL + Math.random() * (MAX_TRAIL - MIN_TRAIL));
            c.head = Math.random() < 0.5 ? '0' : '1';
          }
        }
      }

      let rafId = null;
      function loop() {
        draw();
        rafId = requestAnimationFrame(loop);
      }
      loop();

      let resizeTimeout;
      window.addEventListener('resize', () => {
        cancelAnimationFrame(rafId);
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          initColumns();
          loop();
        }, 100);
      });
    })();
  </script>
</body>
</html>
